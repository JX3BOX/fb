(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14765303"],{"095a":function(t,i,s){"use strict";s.r(i);var l=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-fb-story"},[t.data&&t.data.length?s("el-tabs",{attrs:{type:"card"},model:{value:t.map_id,callback:function(i){t.map_id=i},expression:"map_id"}},t._l(t.data,(function(i){return s("el-tab-pane",{key:i.MapID,attrs:{label:i.Layer3Name,name:String(i.MapID)}},[s("div",{staticClass:"m-story-basic"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("基本信息")]),s("el-descriptions",{attrs:{column:3,border:""}},[s("el-descriptions-item",{attrs:{label:"名称"}},[t._v(t._s(i.OtherName))]),s("el-descriptions-item",{attrs:{label:"地图ID"}},[t._v(t._s(i.MapID))]),s("el-descriptions-item",{attrs:{label:"资料片"}},[t._v("Level."+t._s(i.DivideLevel)+"／"+t._s(i.DivideName)+"／"+t._s(i.VersionName))]),s("el-descriptions-item",{attrs:{label:"最低等级要求"}},[t._v(t._s(i.MinLevel))]),s("el-descriptions-item",{attrs:{label:"入口",span:2}},[t._v(t._s(i.EnterWay))]),s("el-descriptions-item",{attrs:{label:"简介"}},[t._v(t._s(t._f("formartIntroduction")(i.Introduction)))])],1)],1),s("div",{staticClass:"m-story-boss"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("首领传说")]),t.boss_list&&t.boss_list.length?s("div",{staticClass:"u-list"},t._l(t.boss_list,(function(i,l){return s("div",{key:l,staticClass:"u-boss"},[s("h5",{staticClass:"u-name"},[s("svg",{class:"u-boss-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"833.7",height:"833.7",viewBox:"0 0 833.7 833.7","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[s("path",{attrs:{d:"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z"}})]),t._v(" "+t._s(i.BOSS)+" ")]),s("p",{staticClass:"u-boss-detail",domProps:{innerHTML:t._s(i.Introduce)}}),s("el-button",{staticClass:"u-boss-more",attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-key"},on:{click:function(s){return t.loadSkills(i)}}},[t._v(t._s(t.skill_list[i.NPCID]?t.skill_status[i.NPCID]?"收起":"展开":"查看技能"))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.skill_status[i.NPCID],expression:"skill_status[boss.NPCID]"}],staticClass:"u-boss-skills"},[t.skill_list[i.NPCID]?t._l(t.skill_list[i.NPCID],(function(i){return s("div",{key:i.idkey,staticClass:"u-skill"},[s("h6",{staticClass:"u-skill-name"},[t._v("※ "+t._s(i.SkillName))]),s("div",{staticClass:"u-skill-desc"},[t._v(t._s(i.Desc))])])})):s("div",{staticClass:"u-skill-null"},[s("i",{staticClass:"el-icon-warning-outline"}),t._v(" 没有相关信息")])],2)],1)})),0):t._e()],1)])})),1):s("el-alert",{attrs:{title:"未找到相关信息",type:"info","show-icon":""}})],1)},a=[],n=(s("d3b7"),s("a15b"),s("65c2")),e=s("41cb"),o=Object(e["f"])();function r(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return o.get("/fb/info",{params:{name:t,client:i}})}function c(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return o.get("/fb/boss",{params:{MapID:t,client:i}})}function d(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return o.get("/fb/skills",{params:{skills:t,client:i}})}var u=s("85e4"),v=(s("c228"),{name:"Story",props:[],data:function(){return{loading:!1,map_id:"",data:"",boss_list:"",skill_list:{},skill_status:{}}},computed:{fb:function(){return this.$route.query.fb_name||this.$store.state.default_fb},client:function(){return this.$store.state.client},map_cover:function(){return n["__ossMirror"]+"pic/map/map_"+this.mapid+"_0.png"}},methods:{loadData:function(){var t=this;this.loading=!0,r(this.fb,this.client).then((function(i){var s,l;return t.data=(null===i||void 0===i?void 0:i.data)||[],t.map_id=String(null===(s=t.data)||void 0===s||null===(l=s[0])||void 0===l?void 0:l["MapID"]),t.map_id})).finally((function(){t.loading=!1}))},loadSkills:function(t){var i=this,s=null===t||void 0===t?void 0:t.NPCID;if(this.skill_list[s])this.skill_status[s]=!this.skill_status[s],this.$forceUpdate();else{var l=[t.Step1Skill,t.Step2Skill,t.Step3Skill,t.Step4Skill,t.szStep5Skill];l=_.compact(l),l=l.join(";"),this.loading=!0,d(l,this.client).then((function(t){i.skill_list[s]=(null===t||void 0===t?void 0:t.data)||[],i.skill_status[s]=!0,i.$forceUpdate()})).finally((function(){i.loading=!1}))}}},watch:{fb:function(){this.loadData()},map_id:function(t){var i=this;t&&(this.loading=!0,c(t,this.client).then((function(t){i.boss_list=(null===t||void 0===t?void 0:t.data)||[]})).finally((function(){i.loading=!1})))}},filters:{formartIntroduction:function(t){var i,s;return null===(i=Object(u["extractTextContent"])(t))||void 0===i||null===(s=i[0])||void 0===s?void 0:s.text}},mounted:function(){this.loadData()}}),p=v,f=(s("38b6"),s("2877")),m=Object(f["a"])(p,l,a,!1,null,null,null);i["default"]=m.exports},"38b6":function(t,i,s){"use strict";s("dd66")},a15b:function(t,i,s){"use strict";var l=s("23e7"),a=s("e330"),n=s("44ad"),e=s("fc6a"),o=s("a640"),r=a([].join),c=n!=Object,d=o("join",",");l({target:"Array",proto:!0,forced:c||!d},{join:function(t){return r(e(this),void 0===t?",":t)}})},c228:function(t,i){function s(t){var i=-1,s=null==t?0:t.length,l=0,a=[];while(++i<s){var n=t[i];n&&(a[l++]=n)}return a}t.exports=s},dd66:function(t,i,s){}}]);
//# sourceMappingURL=chunk-14765303.ba29141c.js.map