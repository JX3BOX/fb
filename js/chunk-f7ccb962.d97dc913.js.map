{"version":3,"sources":["webpack:///./src/views/Story.vue","webpack:///./src/service/story.js","webpack:///src/views/Story.vue","webpack:///./src/views/Story.vue?bc02","webpack:///./src/views/Story.vue?dc35","webpack:///./src/views/Story.vue?9a02"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","data","length","attrs","model","map_id","callback","$$v","_l","item","key","MapID","Layer3Name","String","_v","_s","OtherName","DivideLevel","DivideName","VersionName","MinLevel","EnterWay","formatIntroduction","Introduction","boss_list","boss","i","class","BOSS","domProps","Introduce","on","$event","loadSkills","skill_list","NPCID","skill_status","skill","idkey","SkillName","Desc","_e","staticRenderFns","$","$node","getInfo","client","arguments","undefined","get","params","getBoss","getBossSkills","skills","components","fbMap","props","computed","fb","$route","query","fb_name","$store","state","default_fb","map_cover","__ossMirror","mapid","methods","loadData","_this","then","res","_this$data","_this$data$","finally","_this2","npc_id","$forceUpdate","Step1Skill","Step2Skill","Step3Skill","Step4Skill","szStep5Skill","_","compact","join","str","_extractTextContent","_extractTextContent$","extractTextContent","text","watch","id","_this3","immediate","handler","mounted","component"],"mappings":"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","file":"js/chunk-f7ccb962.d97dc913.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-fb-story\"},[(_vm.data && _vm.data.length)?_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.map_id),callback:function ($$v) {_vm.map_id=$$v},expression:\"map_id\"}},[_vm._l((_vm.data),function(item){return _c('el-tab-pane',{key:item.MapID,attrs:{\"label\":item.Layer3Name,\"name\":String(item.MapID)}},[_c('div',{staticClass:\"m-story-basic\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"基本信息\")]),_c('el-descriptions',{attrs:{\"column\":3,\"border\":\"\"}},[_c('el-descriptions-item',{attrs:{\"label\":\"名称\"}},[_vm._v(_vm._s(item.OtherName))]),_c('el-descriptions-item',{attrs:{\"label\":\"地图ID\"}},[_vm._v(_vm._s(item.MapID))]),_c('el-descriptions-item',{attrs:{\"label\":\"资料片\"}},[_vm._v(\"Level.\"+_vm._s(item.DivideLevel)+\"／\"+_vm._s(item.DivideName)+\"／\"+_vm._s(item.VersionName))]),_c('el-descriptions-item',{attrs:{\"label\":\"最低等级要求\"}},[_vm._v(_vm._s(item.MinLevel))]),_c('el-descriptions-item',{attrs:{\"label\":\"入口\",\"span\":2}},[_vm._v(_vm._s(item.EnterWay))]),_c('el-descriptions-item',{attrs:{\"label\":\"简介\"}},[_vm._v(_vm._s(_vm.formatIntroduction(item.Introduction)))])],1)],1),_c('div',{staticClass:\"m-story-boss\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"首领传说\")]),(_vm.boss_list && _vm.boss_list.length)?_c('div',{staticClass:\"u-list\"},_vm._l((_vm.boss_list),function(boss,i){return _c('div',{key:i,staticClass:\"u-boss\"},[_c('h5',{staticClass:\"u-name\"},[_c('svg',{class:'u-boss-icon',attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"833.7\",\"height\":\"833.7\",\"viewBox\":\"0 0 833.7 833.7\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z\"}})]),_vm._v(\" \"+_vm._s(boss.BOSS)+\" \")]),_c('p',{staticClass:\"u-boss-detail\",domProps:{\"innerHTML\":_vm._s(boss.Introduce)}}),_c('el-button',{staticClass:\"u-boss-more\",attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-key\"},on:{\"click\":function($event){return _vm.loadSkills(boss)}}},[_vm._v(_vm._s(!_vm.skill_list[boss.NPCID] ? \"查看技能\" : _vm.skill_status[boss.NPCID] ? \"收起\" : \"展开\"))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.skill_status[boss.NPCID]),expression:\"skill_status[boss.NPCID]\"}],staticClass:\"u-boss-skills\"},[(_vm.skill_list[boss.NPCID])?_vm._l((_vm.skill_list[boss.NPCID]),function(skill){return _c('div',{key:skill.idkey,staticClass:\"u-skill\"},[_c('h6',{staticClass:\"u-skill-name\"},[_vm._v(\"※ \"+_vm._s(skill.SkillName))]),_c('div',{staticClass:\"u-skill-desc\"},[_vm._v(_vm._s(skill.Desc))])])}):_c('div',{staticClass:\"u-skill-null\"},[_c('i',{staticClass:\"el-icon-warning-outline\"}),_vm._v(\" 没有相关信息 \")])],2)],1)}),0):_vm._e()],1)])}),_c('el-tab-pane',{attrs:{\"label\":'副本地图'}},[_c('fb-map')],1)],2):_c('el-alert',{attrs:{\"title\":\"未找到相关信息\",\"type\":\"info\",\"show-icon\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $node } from \"@jx3box/jx3box-common/js/https\";\nconst $ = $node()\n\n// import axios from \"axios\";\n// const $ = axios.create({\n//     baseURL: \"http://localhost:7002/\",\n// });\n\nfunction getInfo(name, client = \"std\") {\n    return $.get(\"/fb/info\", {\n        params: {\n            name: name,\n            client: client,\n        },\n    });\n}\n\nfunction getBoss(map_id, client = \"std\") {\n    return $.get(\"/fb/boss\", {\n        params: {\n            MapID: map_id,\n            client: client,\n        },\n    });\n}\n\nfunction getBossSkills(skills,client='std'){\n    return $.get('/fb/skills',{\n        params : {\n            skills,\n            client\n        }\n    })\n}\n\nexport { getInfo, getBoss,getBossSkills };\n","<template>\n    <div class=\"m-fb-story\" v-loading=\"loading\">\n        <el-tabs v-model=\"map_id\" type=\"card\" v-if=\"data && data.length\">\n            <el-tab-pane v-for=\"item in data\" :label=\"item.Layer3Name\" :key=\"item.MapID\" :name=\"String(item.MapID)\">\n                <div class=\"m-story-basic\">\n                    <el-divider content-position=\"left\">基本信息</el-divider>\n                    <el-descriptions :column=\"3\" border>\n                        <el-descriptions-item label=\"名称\">{{ item.OtherName }}</el-descriptions-item>\n                        <el-descriptions-item label=\"地图ID\">{{ item.MapID }}</el-descriptions-item>\n                        <el-descriptions-item label=\"资料片\">Level.{{ item.DivideLevel }}／{{ item.DivideName }}／{{\n                            item.VersionName\n                        }}</el-descriptions-item>\n                        <el-descriptions-item label=\"最低等级要求\">{{ item.MinLevel }}</el-descriptions-item>\n                        <el-descriptions-item label=\"入口\" :span=\"2\">{{ item.EnterWay }}</el-descriptions-item>\n                        <el-descriptions-item label=\"简介\">{{\n                            formatIntroduction(item.Introduction)\n                        }}</el-descriptions-item>\n                    </el-descriptions>\n                </div>\n                <div class=\"m-story-boss\">\n                    <el-divider content-position=\"left\">首领传说</el-divider>\n                    <div class=\"u-list\" v-if=\"boss_list && boss_list.length\">\n                        <div class=\"u-boss\" v-for=\"(boss, i) in boss_list\" :key=\"i\">\n                            <h5 class=\"u-name\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"833.7\" height=\"833.7\" viewBox=\"0 0 833.7 833.7\" v-bind:class=\"'u-boss-icon'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z\"/></svg>\n                                {{ boss.BOSS }}\n                            </h5>\n                            <p class=\"u-boss-detail\" v-html=\"boss.Introduce\"></p>\n                            <el-button class=\"u-boss-more\" type=\"primary\" plain @click=\"loadSkills(boss)\" size=\"mini\"\n                                icon=\"el-icon-key\">{{\n                                    !skill_list[boss.NPCID]\n                                    ? \"查看技能\"\n                                    : skill_status[boss.NPCID]\n                                        ? \"收起\"\n                                        : \"展开\"\n                                }}</el-button>\n                            <div class=\"u-boss-skills\" v-show=\"skill_status[boss.NPCID]\">\n                                <template v-if=\"skill_list[boss.NPCID]\">\n                                    <div class=\"u-skill\" v-for=\"skill in skill_list[boss.NPCID]\" :key=\"skill.idkey\">\n                                        <h6 class=\"u-skill-name\">※ {{ skill.SkillName }}</h6>\n                                        <div class=\"u-skill-desc\">{{ skill.Desc }}</div>\n                                    </div>\n                                </template>\n                                <div class=\"u-skill-null\" v-else>\n                                    <i class=\"el-icon-warning-outline\"></i> 没有相关信息\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </el-tab-pane>\n            <el-tab-pane :label=\"'副本地图'\">\n                <fb-map></fb-map>\n            </el-tab-pane>\n        </el-tabs>\n        <el-alert title=\"未找到相关信息\" type=\"info\" show-icon v-else></el-alert>\n    </div>\n</template>\n\n<script>\nimport { __ossMirror } from \"@jx3box/jx3box-common/data/jx3box\";\nimport { getInfo, getBoss, getBossSkills } from \"@/service/story.js\";\nimport { extractTextContent } from \"@jx3box/jx3box-common/js/utils\";\nimport fbMap from \"./Map.vue\";\n\nexport default {\n    name: \"Story\",\n    components: {\n        fbMap,\n    },\n    props: [],\n    data: function () {\n        return {\n            loading: false,\n            map_id: \"\",\n            data: \"\",\n            boss_list: \"\",\n            skill_list: {\n                // NPCID : []\n            },\n            skill_status: {},\n        };\n    },\n    computed: {\n        fb: function () {\n            return this.$route.query.fb_name || this.$store.state.default_fb;\n        },\n        client: function () {\n            return this.$store.state.client;\n        },\n        map_cover: function () {\n            return __ossMirror + \"pic/map/map_\" + this.mapid + \"_0.png\";\n        },\n    },\n    methods: {\n        loadData: function () {\n            this.loading = true;\n            getInfo(this.fb, this.client)\n                .then((res) => {\n                    this.data = res?.data || [];\n                    if (!this.map_id) {\n                        this.map_id = String(this.data?.[0]?.[\"MapID\"]);\n                    }\n                    return this.map_id;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        loadSkills: function (boss) {\n            let npc_id = boss?.NPCID;\n            if (this.skill_list[npc_id]) {\n                this.skill_status[npc_id] = !this.skill_status[npc_id];\n                this.$forceUpdate();\n            } else {\n                // 合并技能列表\n                let skills = [boss.Step1Skill, boss.Step2Skill, boss.Step3Skill, boss.Step4Skill, boss.szStep5Skill];\n                skills = _.compact(skills);\n                skills = skills.join(\";\");\n\n                // 请求技能数据\n                this.loading = true;\n                getBossSkills(skills, this.client)\n                    .then((res) => {\n                        this.skill_list[npc_id] = res?.data || [];\n                        this.skill_status[npc_id] = true;\n                        this.$forceUpdate();\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n            }\n        },\n        formatIntroduction: function (str) {\n            return extractTextContent(str)?.[0]?.text;\n        },\n    },\n    watch: {\n        fb: function () {\n            this.loadData();\n        },\n        map_id: function (id) {\n            if (id) {\n                this.loading = true;\n                getBoss(id, this.client)\n                    .then((res) => {\n                        this.boss_list = res?.data || [];\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n            }\n        },\n        \"$route.query.map_id\": {\n            immediate: true,\n            handler: function (id) {\n                if (id) {\n                    this.map_id = id;\n                }\n            },\n        },\n    },\n    mounted: function () {\n        this.loadData();\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/story.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Story.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Story.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Story.vue?vue&type=template&id=6458bb1e&\"\nimport script from \"./Story.vue?vue&type=script&lang=js&\"\nexport * from \"./Story.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Story.vue?vue&type=style&index=0&id=6458bb1e&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Story.vue?vue&type=style&index=0&id=6458bb1e&prod&lang=less&\""],"sourceRoot":""}