{"version":3,"sources":["webpack:///./src/views/Drop_v2.vue?300c","webpack:///src/views/Drop_v2.vue","webpack:///./src/views/Drop_v2.vue?2be4","webpack:///./src/views/Drop_v2.vue","webpack:///./src/views/Drop_v2.vue?50e0","webpack:///./src/service/getDrop.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","model","callback","$$v","mapid","_l","item","i","key","mode","map_id","j","class","on","BOSS","boss","$event","changeBoss","_v","_s","droptype","groupname","group","droplist","length","drop","ItemType","ItemName","getDropLink","quality","_f","IconID","staticRenderFns","component","$","$node","getBoss","client","get","params","MapID","getDrop","bossindex","getDropV2"],"mappings":"yMAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOT,EAAW,QAAEU,WAAW,YAAYC,YAAY,aAAa,CAACP,EAAG,UAAU,CAACQ,MAAM,CAAC,KAAO,QAAQC,MAAM,CAACJ,MAAOT,EAAS,MAAEc,SAAS,SAAUC,GAAMf,EAAIgB,MAAMD,GAAKL,WAAW,UAAUV,EAAIiB,GAAIjB,EAAW,SAAE,SAASkB,EAAKC,GAAG,OAAOf,EAAG,cAAc,CAACgB,IAAID,EAAEP,MAAM,CAAC,MAAQM,EAAKG,KAAK,KAAOH,EAAKI,SAAS,CAAClB,EAAG,MAAM,CAACO,YAAY,cAAcX,EAAIiB,GAAIjB,EAAY,UAAE,SAASkB,EAAKK,GAAG,OAAOnB,EAAG,MAAM,CAACgB,IAAIG,EAAEZ,YAAY,SAASa,MAAM,CAAEC,GAAIP,EAAKQ,MAAQ1B,EAAI2B,MAAOF,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAO5B,EAAI6B,WAAWX,EAAKQ,SAAS,CAACtB,EAAG,MAAM,CAACoB,MAAM,gBAAgBZ,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,QAAQ,OAAS,QAAQ,QAAU,kBAAkB,aAAa,GAAG,KAAO,eAAe,UAAY,QAAQ,SAAW,OAAO,CAACR,EAAG,OAAO,CAACQ,MAAM,CAAC,EAAI,w1BAAw1BZ,EAAI8B,GAAG,IAAI9B,EAAI+B,GAAGb,EAAKQ,MAAM,UAAS,GAAGtB,EAAG,MAAM,CAACO,YAAY,cAAc,CAACP,EAAG,MAAM,CAACO,YAAY,UAAU,CAACP,EAAG,UAAU,CAACO,YAAY,UAAUC,MAAM,CAAC,eAAe,QAAQC,MAAM,CAACJ,MAAOT,EAAY,SAAEc,SAAS,SAAUC,GAAMf,EAAIgC,SAASjB,GAAKL,WAAW,aAAa,CAACN,EAAG,cAAc,CAACQ,MAAM,CAAC,MAAQ,KAAK,KAAO,MAAMZ,EAAIiB,GAAIjB,EAAW,SAAE,SAASiC,EAAUC,GAAO,OAAO9B,EAAG,cAAc,CAACgB,IAAIc,EAAMtB,MAAM,CAAC,MAAQqB,EAAU,KAAOC,SAAY,IAAI,GAAIlC,EAAImC,UAAYnC,EAAImC,SAASC,OAAQhC,EAAG,MAAM,CAACO,YAAY,WAAWX,EAAIiB,GAAIjB,EAAY,UAAE,SAASqC,GAAM,OAAOjC,EAAG,IAAI,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,SAAUT,EAAIgC,UAAYK,EAAKC,UAAYtC,EAAIgC,SAAUtB,WAAW,6CAA6CU,IAAIiB,EAAKE,SAAS5B,YAAY,SAASC,MAAM,CAAC,KAAOZ,EAAIwC,YAAYH,KAAQ,CAACjC,EAAG,IAAI,CAACO,YAAY,+BAA+Ba,MAAM,gBAAkBa,EAAKI,SAAS,CAACrC,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAI0C,GAAG,WAAP1C,CAAmBqC,EAAKM,aAAavC,EAAG,OAAO,CAACO,YAAY,eAAe,CAACX,EAAI8B,GAAG9B,EAAI+B,GAAGM,EAAKE,kBAAiB,GAAGnC,EAAG,WAAW,CAACQ,MAAM,CAAC,MAAQ,SAAS,KAAO,OAAO,YAAY,OAAO,QAAO,IAAI,IAC90FgC,EAAkB,G,sECgEtB,GACE,KAAF,SACE,MAAF,GACE,KAAF,WACI,MAAJ,CACM,MAAN,GACM,SAAN,GACM,KAAN,GAEM,QAAN,EACM,SAAN,GACM,SAAN,GAEM,KAAN,GACM,SAAN,IAGE,SAAF,CACI,GAAJ,WACM,OAAN,yDAEI,IAAJ,WACM,OAAN,yDAEI,OAAJ,WACM,OAAN,iCAEI,QAAJ,WAAM,IAAN,QACM,OAAN,kKACA,SAGI,OAAJ,WACM,MAAN,CACQ,OAAR,YACQ,SAAR,aAKE,QAAF,CACI,SAAJ,WAAM,IAAN,OACM,KAAN,gCACQ,EAAR,mBAGI,aAAJ,WAAM,IAAN,OACM,OAAN,yDACQ,EAAR,kDACQ,EAAR,+BAGI,aAAJ,WAAM,IAAN,OAEM,OADA,KAAN,WACA,uCACA,kBACQ,EAAR,+CAEA,oBACQ,EAAR,eAGI,WAAJ,YACM,KAAN,OACM,KAAN,gBAEI,YA1BJ,SA0BA,GACM,OAAN,uDAGE,MAAF,CACI,GAAJ,CACM,WAAN,EACM,QAAN,WAAQ,IAAR,EACQ,KAAR,gEACQ,KAAR,aAGI,MAAJ,CACM,QAAN,YACQ,GAAR,mBAIE,QAAF,CACI,SAAJ,eAEE,WAAF,ICxJ4Y,I,wBCQxYC,EAAY,eACd,EACA9C,EACA6C,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CCnBf,W,kCCAA,sHACMC,EAAIC,iBAOV,SAASC,EAAQ1B,GAAwB,IAAhB2B,EAAgB,uDAAP,MAC9B,OAAOH,EAAEI,IAAI,WAAY,CACrBC,OAAQ,CACJC,MAAO9B,EACP2B,OAAQA,KAKpB,SAASI,EAAQC,GAA2B,IAAhBL,EAAgB,uDAAP,MACjC,OAAOH,EAAEI,IAAI,YAAcI,EAAW,CAClCH,OAAQ,CACJF,OAAQA,KAKpB,SAASM,EAAUvC,EAAMmC,GACrB,OAAOL,EAAEI,IAAF,sBAAqBlC,GAAQ,CAChCmC,OAASA,M","file":"js/chunk-9f205f2e.2e561dd1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-fb-drop\"},[_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.mapid),callback:function ($$v) {_vm.mapid=$$v},expression:\"mapid\"}},_vm._l((_vm.maplist),function(item,i){return _c('el-tab-pane',{key:i,attrs:{\"label\":item.mode,\"name\":item.map_id}},[_c('div',{staticClass:\"u-bosslist\"},_vm._l((_vm.bosslist),function(item,j){return _c('div',{key:j,staticClass:\"u-boss\",class:{ on: item.BOSS == _vm.boss },on:{\"click\":function($event){return _vm.changeBoss(item.BOSS)}}},[_c('svg',{class:'u-boss-avatar',attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"833.7\",\"height\":\"833.7\",\"viewBox\":\"0 0 833.7 833.7\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z\"}})]),_vm._v(\" \"+_vm._s(item.BOSS)+\" \")])}),0),_c('div',{staticClass:\"u-droplist\"},[_c('div',{staticClass:\"u-tabs\"},[_c('el-tabs',{staticClass:\"u-group\",attrs:{\"tab-position\":\"left\"},model:{value:(_vm.droptype),callback:function ($$v) {_vm.droptype=$$v},expression:\"droptype\"}},[_c('el-tab-pane',{attrs:{\"label\":\"全部\",\"name\":\"\"}}),_vm._l((_vm.dropmap),function(groupname,group){return _c('el-tab-pane',{key:group,attrs:{\"label\":groupname,\"name\":group}})})],2)],1),(_vm.droplist && _vm.droplist.length)?_c('div',{staticClass:\"u-drops\"},_vm._l((_vm.droplist),function(drop){return _c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(!~~_vm.droptype || drop.ItemType == _vm.droptype),expression:\"!~~droptype || drop.ItemType == droptype\"}],key:drop.ItemName,staticClass:\"u-item\",attrs:{\"href\":_vm.getDropLink(drop)}},[_c('i',{staticClass:\"u-drop-item-icon u-item-icon\",class:'u-item-color-' + drop.quality},[_c('img',{attrs:{\"src\":_vm._f(\"iconLink\")(drop.IconID)}})]),_c('span',{staticClass:\"u-item-name\"},[_vm._v(_vm._s(drop.ItemName))])])}),0):_c('el-alert',{attrs:{\"title\":\"没有相关条目\",\"type\":\"info\",\"show-icon\":\"\"}})],1)])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-fb-drop\" v-loading=\"loading\">\n        <el-tabs v-model=\"mapid\" type=\"card\">\n            <el-tab-pane\n                :label=\"item.mode\"\n                :name=\"item.map_id\"\n                v-for=\"(item, i) in maplist\"\n                :key=\"i\"\n            >\n                <div class=\"u-bosslist\">\n                    <div\n                        class=\"u-boss\"\n                        :class=\"{ on: item.BOSS == boss }\"\n                        v-for=\"(item, j) in bosslist\"\n                        :key=\"j\"\n                        @click=\"changeBoss(item.BOSS)\"\n                    >\n                        <!-- <img :src=\"bossavatar(j)\" /> -->\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"833.7\" height=\"833.7\" viewBox=\"0 0 833.7 833.7\" v-bind:class=\"'u-boss-avatar'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z\"/></svg>\n                        {{ item.BOSS }}\n                    </div>\n                </div>\n                <div class=\"u-droplist\">\n                    <div class=\"u-tabs\">\n                        <el-tabs tab-position=\"left\" class=\"u-group\" v-model=\"droptype\">\n                            <el-tab-pane label=\"全部\" name></el-tab-pane>\n                            <el-tab-pane\n                                :label=\"groupname\"\n                                v-for=\"(groupname, group) in dropmap\"\n                                :key=\"group\"\n                                :name=\"group\"\n                            ></el-tab-pane>\n                        </el-tabs>\n                    </div>\n                    <div class=\"u-drops\" v-if=\"droplist && droplist.length\">\n                        <a\n                            class=\"u-item\"\n                            :href=\"getDropLink(drop)\"\n                            v-for=\"drop in droplist\"\n                            :key=\"drop.ItemName\"\n                            v-show=\"!~~droptype || drop.ItemType == droptype\"\n                        >\n                            <i\n                                class=\"u-drop-item-icon u-item-icon\"\n                                :class=\"'u-item-color-' + drop.quality\"\n                            >\n                                <img :src=\"drop.IconID | iconLink\" />\n                            </i>\n                            <span class=\"u-item-name\">{{ drop.ItemName}}</span>\n                        </a>\n                    </div>\n                    <el-alert v-else title=\"没有相关条目\" type=\"info\" show-icon></el-alert>\n                </div>\n            </el-tab-pane>\n        </el-tabs>\n    </div>\n</template>\n\n<script>\nimport { getDropV2, getBoss } from \"../service/getDrop\";\nimport { __iconPath, __ossRoot } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport dropmap from \"../assets/data/drop_types.json\";\nimport { getLink, iconLink } from \"@jx3box/jx3box-common/js/utils\";\n// import drop_item from \"../components/drop_item\";\n\nexport default {\n    name: \"DropV2\",\n    props: [],\n    data: function () {\n        return {\n            mapid: \"\",\n            bosslist: [],\n            boss: \"\",\n\n            dropmap,\n            droplist: [],\n            droptype: \"\",\n\n            data: {},\n            loading: false,\n        };\n    },\n    computed: {\n        fb: function () {\n            return this.$route.query.fb_name || this.$store.state.default_fb;\n        },\n        zlp: function () {\n            return this.$route.query.fb_zlp || this.$store.state.default_zlp;\n        },\n        client: function () {\n            return this.$store.state.client || \"std\";\n        },\n        maplist: function () {\n            return this.$store.state.map?.[this.zlp]?.[\"dungeon\"]?.[this.fb]?.[\n                \"maps\"\n            ];\n        },\n        params: function () {\n            return {\n                client: this.client,\n                BossName: this.boss,\n                // ItemType: this.droptype,\n            };\n        },\n    },\n    methods: {\n        loadData: function () {\n            this.loadBossList().then(() => {\n                this.loadDropList();\n            });\n        },\n        loadBossList: function () {\n            return getBoss(this.mapid, this.client).then((res) => {\n                this.bosslist = res?.data || [];\n                this.boss = this.bosslist[0][\"BOSS\"];\n            });\n        },\n        loadDropList: function () {\n            this.loading = true;\n            return getDropV2(this.mapid, this.params)\n                .then((res) => {\n                    this.droplist = res?.data;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        changeBoss: function (boss) {\n            this.boss = boss;\n            this.loadDropList();\n        },\n        getDropLink(dropitem) {\n            return getLink(\"item\", dropitem.ItemType + \"_\" + dropitem.ItemID);\n        },\n    },\n    watch: {\n        fb: {\n            immediate: true,\n            handler: function () {\n                this.mapid = this.maplist?.[0][\"map_id\"];\n                this.loadData();\n            },\n        },\n        mapid: {\n            handler: function (val) {\n                val && this.loadData();\n            },\n        },\n    },\n    filters: {\n        iconLink,\n    },\n    components: {\n        // drop_item,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/drop.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Drop_v2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Drop_v2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Drop_v2.vue?vue&type=template&id=fee9e76e&\"\nimport script from \"./Drop_v2.vue?vue&type=script&lang=js&\"\nexport * from \"./Drop_v2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Drop_v2.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Drop_v2.vue?vue&type=style&index=0&lang=less&\"","import { $node } from \"@jx3box/jx3box-common/js/https\";\nconst $ = $node();\n\n// import axios from \"axios\";\n// const $ = axios.create({\n//     baseURL: \"http://localhost:7002/\",\n// });\n\nfunction getBoss(map_id, client = \"std\") {\n    return $.get(\"/fb/boss\", {\n        params: {\n            MapID: map_id,\n            client: client,\n        },\n    });\n}\n\nfunction getDrop(bossindex, client = \"std\") {\n    return $.get(\"/fb/drop/\" + bossindex, {\n        params: {\n            client: client,\n        },\n    })\n}\n\nfunction getDropV2(mapid,params){\n    return $.get(`/fb/drop/v2/${mapid}`,{\n        params : params\n    })\n}\n\nexport { getDrop, getBoss,getDropV2 };\n"],"sourceRoot":""}